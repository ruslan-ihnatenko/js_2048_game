const t=new class{constructor(t=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]){this.score=0,this.board=t,this.status="idle"}start(){this.status="playing",this.addRandomTile(),this.addRandomTile()}restart(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle",this.start()}getScore(){return this.score}getState(){return this.board}getStatus(){return this.status}addRandomTile(){let t=[];for(let e=0;e<this.board.length;e++)for(let r=0;r<this.board[e].length;r++)0===this.board[e][r]&&t.push([e,r]);if(t.length>0){let[e,r]=t[Math.floor(Math.random()*t.length)];this.board[e][r]=.9>Math.random()?2:4}}moveLeft(){let t=!1;for(let e=0;e<this.board.length;e++){let r=this.slideAndMerge(this.board[e]);r.toString()!==this.board[e].toString()&&(t=!0,this.board[e]=r)}return t&&this.addRandomTile(),t}moveRight(){let t=!1;for(let e=0;e<this.board.length;e++){let r=[...this.board[e]].reverse(),o=this.slideAndMerge(r).reverse();o.toString()!==this.board[e].toString()&&(t=!0,this.board[e]=o)}return t&&this.addRandomTile(),t}moveUp(){let t=!1;for(let e=0;e<4;e++){let r=[this.board[0][e],this.board[1][e],this.board[2][e],this.board[3][e]],o=this.slideAndMerge(r);for(let r=0;r<4;r++)this.board[r][e]!==o[r]&&(t=!0,this.board[r][e]=o[r])}return t&&this.addRandomTile(),t}moveDown(){let t=!1;for(let e=0;e<4;e++){let r=[this.board[0][e],this.board[1][e],this.board[2][e],this.board[3][e]].reverse(),o=this.slideAndMerge(r).reverse();for(let r=0;r<4;r++)this.board[r][e]!==o[r]&&(t=!0,this.board[r][e]=o[r])}return t&&this.addRandomTile(),t}slideAndMerge(t){let e=t.filter(t=>0!==t);for(let t=0;t<e.length-1;t++)e[t]===e[t+1]&&(e[t]*=2,this.score+=e[t],e[t+1]=0);let r=e.filter(t=>0!==t),o=Array(4-r.length).fill(0);return r.concat(o)}checkGameOver(){for(let t=0;t<4;t++)for(let e=0;e<4;e++)if(0===this.board[t][e]||e<3&&this.board[t][e]===this.board[t][e+1]||t<3&&this.board[t][e]===this.board[t+1][e])return!1;return this.status="lose",!0}checkWinCondition(){for(let t=0;t<4;t++)for(let e=0;e<4;e++)if(2048===this.board[t][e])return this.status="win",!0;return!1}},e=document.querySelector(".game-field"),r=document.querySelector(".game-score"),o=document.querySelector(".start"),s=document.querySelector(".message-container");let i=0,a=0,d=0,n=0;function l(){h(),t.checkWinCondition()?c("\uD83C\uDF89 You win! Congrats!","win"):t.checkGameOver()&&c("\uD83D\uDC80 Game Over! Restart the game?","lose")}function h(){let o=t.getState(),s=e.querySelectorAll(".field-row");o.forEach((t,e)=>{let r=s[e].querySelectorAll(".field-cell");t.forEach((t,e)=>{let o=r[e];o.textContent=0!==t?t:"",o.className="field-cell",0!==t&&o.classList.add(`field-cell--${t}`)})}),r.textContent=t.getScore()}function c(t,e){s.querySelectorAll(".message").forEach(t=>t.classList.add("hidden"));let r=s.querySelector(`.message-${e}`);r.textContent=t,r.classList.remove("hidden")}document.addEventListener("touchstart",t=>{i=t.touches[0].clientX,a=t.touches[0].clientY}),document.addEventListener("touchmove",t=>{d=t.touches[0].clientX,n=t.touches[0].clientY}),document.addEventListener("touchend",()=>{(function(){let e=d-i,r=n-a;Math.abs(e)>Math.abs(r)?e>0?t.moveRight():t.moveLeft():r>0?t.moveDown():t.moveUp(),l()})()}),o.addEventListener("click",()=>{t.restart(),h(),c("Game started! Good luck!","start"),"Start"===o.textContent&&(o.textContent="Restart",o.classList.add("restart"),o.classList.remove("start"))}),document.addEventListener("keydown",e=>{let r=!1;switch(e.key){case"ArrowLeft":r=t.moveLeft();break;case"ArrowRight":r=t.moveRight();break;case"ArrowUp":r=t.moveUp();break;case"ArrowDown":r=t.moveDown()}r&&l()});
//# sourceMappingURL=index.e8ad32b0.js.map
